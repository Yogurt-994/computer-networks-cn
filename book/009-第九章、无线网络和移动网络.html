<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>无线网络和移动网络 - 计算机网络-谢希仁</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="001-第一章、计算机网络.html"><strong aria-hidden="true">1.</strong> 概述</a></li><li class="chapter-item expanded "><a href="002-第二章、物理层.html"><strong aria-hidden="true">2.</strong> 物理层</a></li><li class="chapter-item expanded "><a href="003-第三章、数据链路层.html"><strong aria-hidden="true">3.</strong> 数据链路层</a></li><li class="chapter-item expanded "><a href="004-第四章、网络层.html"><strong aria-hidden="true">4.</strong> 网络层</a></li><li class="chapter-item expanded "><a href="005-第五章、运输层.html"><strong aria-hidden="true">5.</strong> 运输层</a></li><li class="chapter-item expanded "><a href="006-第六章、应用层.html"><strong aria-hidden="true">6.</strong> 应用层</a></li><li class="chapter-item expanded "><a href="007-第七章、网络安全.html"><strong aria-hidden="true">7.</strong> 网络安全</a></li><li class="chapter-item expanded "><a href="009-第九章、无线网络和移动网络.html" class="active"><strong aria-hidden="true">8.</strong> 互联网上的音频/视频服务</a></li><li class="chapter-item expanded "><a href="009-第九章、无线网络和移动网络.html" class="active"><strong aria-hidden="true">9.</strong> 无线网络和移动网络</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">计算机网络-谢希仁</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="第-9-章--无线网络和移动网络"><a class="header" href="#第-9-章--无线网络和移动网络">第 9 章  无线网络和移动网络</a></h1>
<h2 id="91--无线局域网-wlan"><a class="header" href="#91--无线局域网-wlan">9.1  无线局域网 WLAN</a></h2>
<h3 id="911--无线局域网的组成"><a class="header" href="#911--无线局域网的组成">9.1.1  无线局域网的组成</a></h3>
<p>无线局域网 WLAN (Wireless Local Area Network) 可分为两大类：</p>
<ol>
<li>有固定基础设施的 WLAN</li>
<li>无固定基础设施的 WLAN</li>
</ol>
<p>所谓“固定基础设施”是指预先建立起来的、能够覆盖一定地理范围的一批固定基站。</p>
<h4 id="1-ieee-80211"><a class="header" href="#1-ieee-80211">1. IEEE 802.11</a></h4>
<p>IEEE 802.11 是一个有固定基础设施的无线局域网的国际标准。</p>
<p>IEEE 802.11 是个相当复杂的标准。但简单地说，802.11 就是无线以太网的标准：</p>
<ol>
<li>它使用星形拓扑，其中心叫做接入点 AP (Access Point)</li>
<li>在MAC层使用 CSMA/CA 协议</li>
</ol>
<p>凡使用 802.11 系列协议的局域网又称为 Wi-Fi (Wireless-Fidelity，意思是“无线保真度”。</p>
<p>IEEE 802.11 的基本服务集 BSS 和扩展服务集 ESS</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527183216.png" alt="" /></p>
<p>一个基本服务集 BSS 包括一个基站和若干个移动站，所有的站在本 BSS 以内都可以直接通信，但在和本 BSS 以外的站通信时 ，都要通过本 BSS 的基站。 </p>
<p>基本服务集内的基站叫做接入点 AP (Access Point)其作用和网桥相似。</p>
<p>当网络管理员安装 AP 时，必须为该 AP 分配一个不超过 32 字节的服务集标识符 SSID 和一个信道。 </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527183447.png" alt="" /></p>
<p>一个基本服务集可以是孤立的，也可通过接入点 AP连接到一个主干分配系统 DS (Distribution System)，然后再接入到另一个基本服务集，构成扩展的服务集 ESS (Extended Service Set)。</p>
<p>ESS 还可通过叫做门户 (portal) 为无线用户提供到非 802.11 无线局域网（例如，到有线连接的互联网）的接入。门户的作用就相当于一个网桥。 </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527214233.png" alt="" /></p>
<p>移动站 A 从某一个基本服务集漫游到另一个基本服务集（到 A 的位置），仍可保持与另一个移动站 B 进行通信。 </p>
<p><strong>建立关联(association)</strong></p>
<p>一个移动站若要加入到一个基本服务集 BSS，就必须先选择一个接入点 AP，并与此接入点建立关联 (association) 。
建立关联就表示这个移动站加入了选定的 AP 所属的子网，并和这个 AP 之间创建了一个虚拟线路。
只有关联的 AP 才向这个移动站发送数据帧，而这个移动站也只有通过关联的 AP 才能向其他站点发送数据帧。</p>
<p><strong>移动站与 AP 建立关联的方法</strong></p>
<p>被动扫描</p>
<ol>
<li>移动站等待接收接入站周期性发出的信标帧(beacon frame)。</li>
<li>信标帧中包含有若干系统参数（如服务集标识符 SSID 以及支持的速率等）。</li>
</ol>
<p>主动扫描</p>
<ol>
<li>移动站主动发出探测请求帧(probe request frame)，然后等待从 AP 发回的探测响应帧(probe response frame)。</li>
</ol>
<p><strong>热点 (hot spot)</strong></p>
<p>现在许多地方，如办公室、机场、快餐店、旅馆、购物中心等都能够向公众提供有偿或无偿接入 Wi-Fi 的服务。这样的地点就叫做热点。</p>
<p>由许多热点和 AP 连接起来的区域叫做热区 (hot zone)。热点也就是公众无线入网点。</p>
<p>现在也出现了无线互联网服务提供者 WISP (Wireless Internet Service Provider) 这一名词。用户可以通过无线信道接入到 WISP，然后再经过无线信道接入到互联网。</p>
<h4 id="2-移动自组网络"><a class="header" href="#2-移动自组网络">2. 移动自组网络</a></h4>
<p>移动自组网络又称为自组网络 (ad hoc network) 。</p>
<p>自组网络是没有固定基础设施（即没有 AP）的无线局域网。</p>
<p>这种网络是由一些处于平等状态的移动站之间相互通信组成的临时网络。</p>
<p>自组网络的服务范围通常是受限的，而且一般也不和外界的其他网络相连接。</p>
<p>移动自组网络也就是移动分组无线网络。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527214839.png" alt="" /></p>
<p>三个主要问题：路由选择协议，多播，安全。</p>
<p><strong>移动自组网络的应用前景</strong> </p>
<p>在军事领域中，携带了移动站的战士可利用临时建立的移动自组网络进行通信。</p>
<p>这种组网方式也能够应用到作战的地面车辆群和坦克群，以及海上的舰艇群、空中的机群。 </p>
<p>当出现自然灾害时，在抢险救灾时利用移动自组网络进行及时的通信往往很有效的，</p>
<p><strong>无线传感器网络 WSN</strong></p>
<p>无线传感器网络 WSN (Wireless Sensor Network) 是由大量传感器结点通过无线通信技术构成的自组网络。</p>
<p>无线传感器网络的应用是进行各种数据的采集、处理和传输，一般并不需要很高的带宽，但是在大部分时间必须保持低功耗，以节省电池的消耗。</p>
<p>由于无线传感结点的存储容量受限，因此对协议栈的大小有严格的限制。</p>
<p>无线传感器网络还对网络安全性、结点自动配置、网络动态重组等方面有一定的要求。 </p>
<p><strong>传感器结点的形状和组成</strong></p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527214959.png" alt="" /></p>
<p><strong>无线传感器网络主要的应用领域</strong> </p>
<p>无线传感器网络主要的应用领域就是组成各种的物联网 IoT (Internet of Things) ，例如：</p>
<ul>
<li>环境监测与保护（如洪水预报、动物栖息的监控）；</li>
<li>战争中对敌情的侦查和对兵力、装备、物资等的监控；</li>
<li>医疗中对病房的监测和对患者的护理；</li>
<li>在危险的工业环境（如矿井、核电站等）中的安全监测；</li>
<li>城市交通管理、建筑内的温度/照明/安全控制等。 </li>
</ul>
<p><strong>移动自组网络不同于移动 IP</strong></p>
<p>移动 IP 技术使漫游的主机可以用多种方式连接到互联网。</p>
<p>移动 IP 的核心网络功能仍然是基于在固定互联网中一直在使用的各种路由选择协议。</p>
<p>移动自组网络是将移动性扩展到无线领域中的自治系统，它具有自己特定的路由选择协议，并且可以不和互联网相连。</p>
<p><strong>几种不同的接入</strong></p>
<p>固定接入 (fixed access)——在作为网络用户期间，用户设置的地理位置保持不变。</p>
<p>移动接入 (mobility access)——用户设置能够以车辆速度移动时进行网络通信。当发生切换时，通信仍然是连续的。</p>
<p>便携接入 (portable access)——在受限的网络覆盖面积中，用户设备能够在以步行速度移动时进行网络通信，提供有限的切换能力。</p>
<p>游牧接入 (nomadic access)——用户设备的地理位置至少在进行网络通信时保持不变。如用户设备移动了位置，则再次进行通信时可能还要寻找最佳的基站。</p>
<h3 id="912--80211-局域网的物理层"><a class="header" href="#912--80211-局域网的物理层">9.1.2  802.11 局域网的物理层</a></h3>
<p>802.11 标准中物理层相当复杂。根据物理层的不同（如工作频段、数据率、调制方法等），对应的标准也不同。</p>
<p>最早流行的无线局域网是 802.11b，802.11a 和802.11g。2009年颁布了标准 802.11n</p>
<p>802.11 的物理层有以下几种实现方法：</p>
<ul>
<li>直接序列扩频 DSSS</li>
<li>正交频分复用 OFDM </li>
<li>跳频扩频 FHSS （已很少用）</li>
<li>红外线 IR （已很少用） </li>
</ul>
<p><strong>几种常用的 802.11 无线局域网</strong> </p>
<div class="table-wrapper"><table><thead><tr><th>标准</th><th>频段</th><th>数据速率</th><th>物理层</th><th>优缺点</th></tr></thead><tbody>
<tr><td>802.11b  (1999年)</td><td>2.4 GHz</td><td>最高11  Mbit/s</td><td>扩频</td><td>最高数据率较低，价格最低，信号传播距离最远，且不易受阻碍。</td></tr>
<tr><td>802.11a  (1999年)</td><td>5 GHz</td><td>最高54  Mbit/s</td><td>OFDM</td><td>最高数据率较高，支持更多用户同时上网，价格最高，信号传播距离较短，且易受阻碍。</td></tr>
<tr><td>802.11g  (2003年)</td><td>2.4 GHz</td><td>最高54  Mbit/s</td><td>OFDM</td><td>最高数据率较高，支持更多用户同时上网，信号传播距离最远，且不易受阻碍，价格比802.11b贵。</td></tr>
<tr><td>802.11n  (2009年)</td><td>2.4  / 5 GHz</td><td>最高600 Mbit/s</td><td>MIMO  OFDM</td><td>使用多个发射和接收天线达到更高的数据传输率。当使用双倍带宽(40  MHz)时速率可达600  Mbit/s。</td></tr>
</tbody></table>
</div>
<h3 id="913--80211-局域网的-mac-层协议"><a class="header" href="#913--80211-局域网的-mac-层协议">9.1.3  802.11 局域网的 MAC 层协议</a></h3>
<h4 id="1csmaca-协议"><a class="header" href="#1csmaca-协议">1、CSMA/CA 协议</a></h4>
<p>无线局域网不能简单地搬用 CSMA/CD 协议。这里主要有两个原因：</p>
<ul>
<li>“碰撞检测”要求一个站点在发送本站数据的同时，还必须不间断地检测信道，但接收到的信号强度往往会远远小于
发送信号的强度，在无线局域网的设备中要实现这种功能就花费过大。</li>
<li>即使能够实现碰撞检测的功能，并且在发送数据时检测到信道是空闲的时候，在接收端仍然有可能发生碰撞。</li>
</ul>
<p>这种未能检测出媒体上已存在的信号的问题叫做隐蔽站问题(hidden station problem) </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527220245.png" alt="" /></p>
<p>当 A 和 C 检测不到无线信号时，都以为 B 是空闲的，因而都向 B 发送数据，结果发生碰撞。</p>
<hr />
<p>其实 B 向 A 发送数据并不影响 C 向 D 发送数据这就是暴露站问题(exposed station problem) </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527220339.png" alt="" /></p>
<p>B 向 A 发送数据，而 C 又想和 D 通信。C 检测到媒体上有信号，于是就不敢向 D 发送数据。 </p>
<p><strong>CSMA/CA 协议</strong></p>
<p>无线局域网不能使用 CSMA/CD，而只能使用改进的 CSMA 协议。</p>
<p>改进的办法是把 CSMA 增加一个碰撞避免CA (Collision Avoidance)功能。</p>
<p>802.11 就使用 CSMA/CA 协议。而在使用 CSMA/CA 的同时，还增加使用停止等待协议。</p>
<p>下面先介绍 802.11 的 MAC 层。</p>
<p><strong>802.11 的 MAC 层</strong> </p>
<p>MAC 层通过协调功能来确定在基本服务集 BSS 中的移动站在什么时间能发送数据或接收数据。 </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527221056.png" alt="" /></p>
<p>PCF 子层使用集中控制的接入算法把发送数据权轮流交给各个站从而避免了碰撞的产生。自组网络就没有PCF子层。 </p>
<p>DCF 子层在每一个结点使用 CSMA 机制的分布式接入算法，让各个站通过争用信道来获取发送权。因此 DCF 向上提供争用服务。</p>
<p><strong>帧间间隔 IFS</strong> </p>
<p>所有的站在完成发送后，必须再等待一段很短的时间（继续监听）才能发送下一帧。这段时间的通称是帧间间隔 IFS (InterFrame Space)。</p>
<p>帧间间隔长度取决于该站欲发送的帧的类型。高优先级帧需要等待的时间较短，因此可优先获得发送权。</p>
<p>若低优先级帧还没来得及发送而其他站的高优先级帧已发送到媒体，则媒体变为忙态，因而低优先级帧就只能再推迟发送了。这样就减少了发生碰撞的机会。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527221339.png" alt="" /></p>
<p>SIFS，即短 (Short) 帧间间隔，长度为 28 s，是最短的帧间间隔，用来分隔开属于一次对话的各帧。一个站应当能够在这段时间内从发送方式切换到接收方式。</p>
<p>使用 SIFS 的帧类型有：ACK 帧、CTS 帧、由过长的 MAC 帧分片后的数据帧，以及所有回答 AP 探询的帧和在 PCF 方式中接入点 AP 发送出的任何帧。</p>
<p>DIFS，即分布协调功能帧间间隔，它比 SIFS 的帧间间隔要长得多，长度为 128 s。在 DCF 方式中，DIFS 用来发送数据帧和管理帧。</p>
<p><strong>CSMA/CA 协议的原理</strong> </p>
<p>欲发送数据的站先检测信道。在 802.11 标准中规定了在物理层的空中接口进行物理层的载波监听。</p>
<p>通过收到的相对信号强度是否超过一定的门限数值就可判定是否有其他的移动站在信道上发送数据。</p>
<p>当源站发送它的第一个 MAC 帧时，若检测到信道空闲，则在等待一段时间 DIFS 后就可发送。</p>
<p><strong>为什么信道空闲还要再等待</strong> </p>
<p>这是考虑到可能有其他的站有高优先级的帧要发送。</p>
<p>如有，就要让高优先级帧先发送。 </p>
<p><strong>假定没有高优先级帧要发送</strong> </p>
<p>源站发送了自己的数据帧。</p>
<p>目的站若正确收到此帧，则经过时间间隔 SIFS 后，向源站发送确认帧 ACK。</p>
<p>若源站在规定时间内没有收到确认帧 ACK（由重传计时器控制这段时间），就必须重传此帧，直到收到确认为止，或者经过若干次的重传失败后放弃发送。 </p>
<p><strong>虚拟载波监听</strong> </p>
<p>虚拟载波监听 (Virtual Carrier Sense) 的机制是让源站将它要占用信道的时间（包括目的站发回确认帧所需的时间）通知给所有其他站，以便使其他所有站在这一段时间都停止发送数据。</p>
<p>这样就大大减少了碰撞的机会。 </p>
<p>“虚拟载波监听”是表示其他站并没有监听信道，而是由于其他站收到了“源站的通知”才不发送数据。</p>
<p><strong>虚拟载波监听的效果</strong> </p>
<p>这种效果好像是其他站都监听了信道。</p>
<p>所谓“源站的通知”就是源站在其 MAC 帧首部中的第二个字段“持续时间”中填入了在本帧结束后还要占用信道多少时间（以微秒为单位），包括目的站发送确认帧所需的时间。 </p>
<p><strong>网络分配向量</strong> </p>
<p>当一个站检测到正在信道中传送的 MAC 帧首部的“持续时间”字段时，就调整自己的网络分配向量 NAV (Network Allocation Vector)。</p>
<p>NAV 指出了必须经过多少时间才能完成数据帧的这次传输，才能使信道转入到空闲状态。 </p>
<p><strong>争用窗口</strong> </p>
<p>信道从忙态变为空闲时，任何一个站要发送数据帧时，不仅都必须等待一个 DIFS 的间隔，而且还要进入争用窗口，并计算随机退避时间以便再次重新试图接入到信道。</p>
<p>在信道从忙态转为空闲时，为了避免几个站同时发送数据（一旦发送就要把一帧发送完，不能中途停止），各站就要执行退避算法。这样做就减少了发生碰撞的概率。</p>
<p>802.11 使用二进制指数退避算法。</p>
<p><strong>802.11 的退避机制</strong></p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527222016.png" alt="" /></p>
<p><strong>二进制指数退避算法</strong> </p>
<p>第 i 次退避就在 22 + i 个时隙中随机地选择一个，即：第 i 次退避是在时隙 {0, 1, …, 22+i – 1} 中随机地选择一个。 </p>
<p>第 1 次退避是在 8 个时隙（而不是 2 个）中随机选择一个。</p>
<p>第 2 次退避是在 16 个时隙（而不是 4 个）中随机选择一个。 </p>
<p>当时隙编号达到 255 时（这对应于第 6 次退避）就不再增加了。</p>
<p>这里决定退避时间的变量 i 称为退避变量。</p>
<p><strong>退避计时器 (backoff timer)</strong></p>
<p>站点每经历一个时隙的时间就检测一次信道。</p>
<p>这可能发生两种情况：</p>
<ul>
<li>若检测到信道空闲，退避计时器就继续倒计时。</li>
<li>若检测到信道忙，就冻结退避计时器的剩余时间，重新等待信道变为空闲，并再经过时间 DIFS 后，从剩余时间开始继续倒计时。如果退避计时器的时间减小到零时，就开始发送整个数据帧。 </li>
</ul>
<p><strong>退避算法的使用情况</strong> </p>
<p>仅在下面的情况下才不使用退避算法：</p>
<ul>
<li>检测到信道是空闲的，并且这个数据帧是要发送的第一个数据帧。</li>
</ul>
<p>除此以外的所有情况，都必须使用退避算法：</p>
<ul>
<li>在发送第一个帧之前检测到信道处于忙态。</li>
<li>在每一次的重传后。</li>
<li>在每一次的成功发送后。</li>
</ul>
<p><strong>CSMA/CA 算法归纳</strong></p>
<p>(1) 若站点最初有数据要发送（而不是发送不成功再进行重传），且检测到信道空闲，在等待时间 DIFS 后，就发送整个数据帧。</p>
<p>(2) 否则，站点执行 CSMA/CA 协议的退避算法。一旦检测到信道忙，就冻结退避计时器。只要信道空闲，退避计时器就进行倒计时。</p>
<p>(3) 当退避计时器时间减少到零时（这时信道只可能是空闲的），站点就发送整个的帧并等待确认。</p>
<p>(4) 发送站若收到确认，就知道已发送的帧被目的站正确收到了。这时如果要发送第二帧，就要从上面的步骤 (2) 开始，执行 CSMA/CA 协议的退避算法，随机选定一段退避时间。若源站在规定时间内没有收到确认帧 ACK（由重传计时器控制这段时间），就必须重传此帧（再次使用 CSMA/CA 协议争用接入信道），直到收到确认为止，或者经过若干次的重传失败后放弃发送。</p>
<h4 id="2-对信道进行预约"><a class="header" href="#2-对信道进行预约">2. 对信道进行预约</a></h4>
<p>为了更好地解决隐蔽站带来的碰撞问题，802.11 允许要发送数据的站对信道进行预约。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527222247.png" alt="" /></p>
<p>使用 RTS 帧和 CTS 帧会使整个网络的通信效率有所下降。但与数据帧相比，开销不算大。</p>
<p>相反，若不使用这种控制帧，则一旦发生碰撞而导致数据帧重发，则浪费的时间就更多。</p>
<p>虽然如此，协议还是设有三种情况供用户选择：</p>
<ul>
<li>(1) 使用 RTS 帧和 CTS 帧；</li>
<li>(2) 只有当数据帧的长度超过某一数值时才使用 RTS 帧和 CTS 帧（显然，当数据帧本身就很短时，再使用 RTS 帧和 CTS 帧只能增加开销）；</li>
<li>(3) 不使用 RTS 帧和 CTS 帧。</li>
</ul>
<p>虽然协议经过了精心设计，但碰撞仍然会发生。</p>
<p><strong>CSMA/CA 协议的基本流程图</strong></p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527222402.png" alt="" /></p>
<h3 id="914--80211-局域网的-mac-帧"><a class="header" href="#914--80211-局域网的-mac-帧">9.1.4  802.11 局域网的 MAC 帧</a></h3>
<p>802.11 帧共有三种类型：控制帧、数据帧和管理帧。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527222604.png" alt="" /></p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527222634.png" alt="" /></p>
<p><strong>802.11 数据帧的三大部分</strong> </p>
<p>MAC 首部，共 30 字节。帧的复杂性都在帧的首部。</p>
<p>帧主体，也就是帧的数据部分，不超过 2312 字节。这个数值比以太网的最大长度长很多。不过 802.11 帧的长度通常都是小于 1500 字节。</p>
<p>帧检验序列 FCS 是尾部，共 4 字节 </p>
<h4 id="1-关于-80211-数据帧的地址"><a class="header" href="#1-关于-80211-数据帧的地址">1. 关于 802.11 数据帧的地址</a></h4>
<p>802.11 数据帧最特殊的地方就是有四个地址字段。地址 4 用于自组网络。我们在这里只讨论前三种地址。 </p>
<div class="table-wrapper"><table><thead><tr><th>去往 AP</th><th>来自 AP</th><th>地址 1</th><th>地址 2</th><th>地址 3</th><th>地址 4</th></tr></thead><tbody>
<tr><td>0</td><td>1</td><td>目的地址</td><td>AP 地址</td><td>源地址</td><td>——</td></tr>
<tr><td>1</td><td>0</td><td>AP 地址</td><td>源地址</td><td>目的地址</td><td>——</td></tr>
</tbody></table>
</div>
<p>站点 A 向 B 发送数据帧，或路由器 R 向 C 发送数据，但数据帧必须经过 AP 转发。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527223201.png" alt="" /></p>
<p>数据报在路由器 R 与移动站 C 之间传送（表中地址都是MAC地址）</p>
<div class="table-wrapper"><table><thead><tr><th>数据报流向</th><th>去往AP</th><th>来自AP</th><th>地址1</th><th>地址2</th><th>地址3</th><th>地址4</th></tr></thead><tbody>
<tr><td>R接口2  &gt;&gt;    AP2</td><td>1</td><td>0</td><td>AP2地址</td><td>R接口2地址</td><td>C的地址</td><td>——</td></tr>
<tr><td>AP2  &gt;&gt;  C</td><td>0</td><td>1</td><td>C的地址</td><td>AP2地址</td><td>R接口2地址</td><td>——</td></tr>
<tr><td>C &gt;&gt;  AP2</td><td>1</td><td>0</td><td>AP2地址</td><td>C的地址</td><td>R接口2地址</td><td>——</td></tr>
<tr><td>AP2 &gt;&gt;  R  接口  2</td><td>0</td><td>1</td><td>R接口2地址</td><td>AP2地址</td><td>C的地址</td><td>——</td></tr>
</tbody></table>
</div>
<h4 id="2-序号控制持续期和帧控制字段"><a class="header" href="#2-序号控制持续期和帧控制字段">2. 序号控制、持续期和帧控制字段</a></h4>
<p>序号控制字段占 16 位，其中序号子字段占 12 位，分片子字段占 4 位。</p>
<p>持续期字段占 16 位。</p>
<p>帧控制字段共分为 11 个子字段：</p>
<ul>
<li>协议版本字段现在是  0。</li>
<li>类型字段和子类型字段用来区分帧的功能。</li>
<li>更多分片字段置为 1 时表明这个帧属于一个帧的多个分片之一。</li>
<li>有线等效保密字段 WEP 占 1 位。若 WEP = 1，就表明采用了 WEP 加密算法。</li>
</ul>
<p><strong>分片的发送举例</strong> </p>
<p>为了提高传输效率，在信道质量较差时，需要把一个较长的帧划分为许多较短的分片。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527223746.png" alt="" /></p>
<h2 id="92--无线个人区域网-wpan"><a class="header" href="#92--无线个人区域网-wpan">9.2  无线个人区域网 WPAN</a></h2>
<p>无线个人区域网 WPAN (Wireless Personal Area Network) 就是在个人工作地方把属于个人使用的电子设备用无线技术连接起来自组网络，不需要使用接入点 AP。</p>
<p>整个网络的范围大约在 10 m左右。</p>
<p>WPAN可以是一个人使用，也可以是若干人共同使用。</p>
<p>无线个人区域网 WPAN 和个人区域网 PAN (Personal Area Network) 并不完全等同，因为 PAN 不一定都是使用无线连接的。</p>
<p><strong>WPAN 和 WLAN 并不一样</strong> </p>
<p>WPAN 是以个人为中心来使用的无线人个区域网，它实际上就是一个低功率、小范围、低速率和低价格的电缆替代技术。</p>
<p>WLAN 却是同时为许多用户服务的无线局域网，它是一个大功率、中等范围、高速率的局域网。 </p>
<p><strong>WPAN 标准</strong></p>
<p>WPAN 的 IEEE 标准由 IEEE 的 802.15 工作组制定，这个标准也是包括 MAC 层和物理层这两层的标准。</p>
<p>WPAN 都工作在 2.4 GHz的 ISM 频段。</p>
<p>顺便指出，欧洲的 ETSI 标准则把无线个人区域网取名为 HiperPAN。</p>
<h4 id="1-蓝牙系统-bluetooth"><a class="header" href="#1-蓝牙系统-bluetooth">1. 蓝牙系统 (Bluetooth)</a></h4>
<p>最早使用的 WPAN 是 1994 年爱立信公司推出的蓝牙系统，其标准是 IEEE 802.15.1 。</p>
<p>蓝牙的数据率为 720 kbit/s，通信范围在 10 米左右。</p>
<p>蓝牙使用 TDM 方式和扩频跳频 FHSS 技术组成不用基站的皮可网 (piconet)。</p>
<p><strong>皮可网(piconet)</strong></p>
<p>Piconet 直译就是“微微网”，表示这种无线网络的覆盖面积非常小。</p>
<p>每一个皮可网有一个主设备 (Master) 和最多7个工作的从设备 (Slave)。</p>
<p>通过共享主设备或从设备，可以把多个皮可网链接起来，形成一个范围更大的扩散网 (scatternet)。</p>
<p>这种主从工作方式的个人区域网实现起来价格就会比较便宜。</p>
<p><strong>蓝牙系统中的皮可网和扩散网</strong> </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527224100.png" alt="" /></p>
<h4 id="2-低速-wpan"><a class="header" href="#2-低速-wpan">2. 低速 WPAN</a></h4>
<p>低速 WPAN 主要用于工业监控组网、办公自动化与控制等领域，其速率是 2 ~ 250 kbit/s。</p>
<p>低速 WPAN 的标准是 IEEE 802.15.4。最近新修订的标准是 IEEE 802.15.4-2006。</p>
<p>低速 WPAN 中最重要的就是 ZigBee。</p>
<p>ZigBee 技术主要用于各种电子设备（固定的、便携的或移动的）之间的无线通信，其主要特点是通信距离短（10 ~ 80 m），传输数据速率低，并且成本低廉。 </p>
<p><strong>ZigBee 的特点</strong></p>
<p>功耗非常低</p>
<ul>
<li>在工作时，信号的收发时间很短；而在非工作时，ZigBee 结点处于休眠状态，非常省电。对于某些工作时间和总时间之比小于 1% 的情况，电池的寿命甚至可以超过10 年。</li>
</ul>
<p>网络容量大</p>
<ul>
<li>一个 ZigBee 的网络最多包括有 255 个结点，其中一个是主设备，其余则是从设备。若是通过网络协调器，整个网络最多可以支持超过 64000 个结点。 </li>
</ul>
<p><strong>ZigBee 的标准</strong></p>
<p>在 IEEE 802.15.4 标准基础上发展而来的。</p>
<p>所有 ZigBee 产品也是 802.15.4 产品。</p>
<p>IEEE 802.15.4 只是定义了 ZigBee 协议栈的最低的两层（物理层和 MAC 层），而上面的两层（网络层和应用层）则是由 ZigBee 联盟定义的。</p>
<p><strong>ZigBee 的协议栈</strong> </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527224338.png" alt="" /></p>
<p>IEEE 802.15.4 物理层使用的三个频段</p>
<div class="table-wrapper"><table><thead><tr><th>频段</th><th>数据率</th><th>信道数</th></tr></thead><tbody>
<tr><td>2.4 GHz（全球）</td><td>250 kbit/s</td><td>16</td></tr>
<tr><td>915 MHz（美国）</td><td>40 kbit/s</td><td>10</td></tr>
<tr><td>868 MHz（欧洲）</td><td>20 kbit/s</td><td>1</td></tr>
</tbody></table>
</div>
<p>在 MAC 层，主要沿用 802.11 无线局域网标准的 CSMA/CA 协议。</p>
<p>在网络层，ZigBee 可采用星形和网状拓扑，或两者的组合。</p>
<p><strong>ZigBee 的组网方式</strong></p>
<p>一个 ZigBee 网络最多可以有 255 个结点。</p>
<p>ZigBee 的结点按功能的强弱可划分为两大类：</p>
<ul>
<li>
<p>全功能设备 FFD (Full-Function Device) </p>
<ul>
<li>
<p>具备控制器（Controller）的功能，能够提供数据交换。</p>
</li>
<li>
<p>是 ZigBee 网络中的路由器。</p>
</li>
</ul>
</li>
<li>
<p>精简功能设备 RFD (Reduced-Function Device) </p>
<ul>
<li>是 ZigBee 网络中数量最多的端设备。</li>
<li>电路简单，存储容量较小，因而成本较低。</li>
<li>RFD 结点只能与处在该星形网中心的 FFD 结点交换数据。</li>
</ul>
</li>
</ul>
<p>在一个 ZigBee 网络中有一个 FFD 充当该网络的协调器 (coordinator)。</p>
<p>协调器负责维护整个 ZigBee 网络的结点信息，同时还可以与其他 ZigBee 网络的协调器交换数据。</p>
<p>通过各网络协调器的相互通信，可以得到覆盖更大范围、超过 65000 个结点的 ZigBee 网络。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527224724.png" alt="" /></p>
<p>有一个全功能设备 FFD 充当网络的协调器。</p>
<p>ZigBee 网络中数量最多的端设备是精简功能设备 RFD 结点。 </p>
<h4 id="3-高速-wpan"><a class="header" href="#3-高速-wpan">3. 高速 WPAN</a></h4>
<p>高速 WPAN 用于在便携式多媒体装置之间传送数据，支持11 ~ 55 Mbit/s 的数据率，标准是 802.15.3。</p>
<p>IEEE 802.15.3a 工作组还提出了更高数据率的物理层标准的超高速 WPAN，它使用超宽带 UWB 技术。</p>
<p>UWB 技术工作在 3.1 ~ 10.6 GHz 微波频段，有非常高的信道带宽。超宽带信号的带宽应超过信号中心频率的 25% 以上，或信号的绝对带宽超过 500 MHz。</p>
<p>超宽带技术使用了瞬间高速脉冲，可支持 100 ~ 400 Mbit/s 的数据率，可用于小范围内高速传送图像或 DVD 质量的多媒体视频文件。 </p>
<h2 id="93--无线城域网-wman"><a class="header" href="#93--无线城域网-wman">9.3  无线城域网 WMAN</a></h2>
<p>2002 年 4 月通过了 IEEE 802.16 无线城域网(Wireless Metropolitan Area Network) 的标准（又称为IEEE无线城域网空中接口标准） 。</p>
<p>欧洲的 ETSI 也制订类似的无线城域网标准 HiperMAN。</p>
<p>WMAN 可提供“最后一英里”的宽带无线接入（固定的、移动的和便携的）。</p>
<p>在许多情况下，无线城域网可用来代替现有的有线宽带接入，因此它有时又称为无线本地环路。</p>
<p><strong>WiMAX</strong> </p>
<p>WiMAX (Worldwide Interoperability for Microwave Access) 常用来表示无线城域网 WMAN，这与Wi-Fi 常用来表示无线局域网 WLAN 相似。</p>
<p>IEEE 的 802.16 工作组是无线城域网标准的制订者，而 WiMAX 论坛则是 802.16 技术的推动者。</p>
<p>WMAN有两个正式标准：</p>
<ul>
<li>802.16d (它的正式名字是 802.16-2004)：固定宽带无线接入空中接口标准（2 ~ 66 GHz频段）。</li>
<li>802.16e (802.16 的增强版本)：支持移动性的宽带无线接入空中接口标准（2 ~ 6 GHz频段），向下兼容 802.16-2004。</li>
</ul>
<p><strong>802.16 无线城域网服务范围的示意图</strong> </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527224921.png" alt="" /></p>
<h2 id="94--蜂窝移动通信网"><a class="header" href="#94--蜂窝移动通信网">9.4  蜂窝移动通信网</a></h2>
<h3 id="941--蜂窝无线通信技术简介"><a class="header" href="#941--蜂窝无线通信技术简介">9.4.1  蜂窝无线通信技术简介</a></h3>
<p>蜂窝移动网络的发展非常迅速，到目前为止，世界上先后已有超过了 30 种不同的标准。</p>
<p>第一代（1G）蜂窝无线通信是为话音通信设计的模拟 FDM 系统。</p>
<p>第二代（2G）蜂窝无线通信提供低速数字通信（短信服务），其代表性体制就是最流行的 GSM 系统。</p>
<p>2.5G 技术是从 2G 向第三代（3G）过渡的衔接性技术，如 GPRS 和 EDGE 等。</p>
<p>第三代（3G） 移动通信和计算机网络的关系非常密切，它使用 IP 的体系结构和混合的交换机制（电路交换和分组交换），能够提供移动宽带多媒体业务（话音、数据、视频等，可收发电子邮件，浏览网页，进行视频会议等），如 CDMA2000，WCDMA 和 TD-SCDMA。</p>
<p>从 3G 开始以后的各代蜂窝移动通信都是以传输数据业务为主的通信系统，而且必须兼容 2G 的功能（即能够通电话和发送短信），这就是所谓的向后兼容。</p>
<p>第四代（4G）正式名称是 IMT-Advanced (International Mobile Telecommunications-Advanced)，意思是高级国际移动通信。</p>
<p>4G的一个重要技术指标就是要实现更高的数据率。目标峰值数据率是：固定的和低速移动通信时应达到1 Gbit/s，在高速移动通信时（如在火车。汽车上）应达到100 Mbit/s。</p>
<p>4G 现有两个国际标准：</p>
<ul>
<li>
<p>LTE (Long-Term Evolution)： </p>
<ul>
<li>又分为时分双工 TD-LTE 和 频分双工 FDD-LTE 两种。</li>
<li>把带宽增加到 20 MHz，采用了高阶调制 64QAM 和 MIMO 技术。</li>
</ul>
</li>
<li>
<p>LTE-A (LTE-Advanced)：</p>
<ul>
<li>LTE 的升级版，俗称为 3.9G。</li>
<li>带宽高达 100 MHz。</li>
</ul>
</li>
</ul>
<p><strong>GSM 蜂窝通信系统的重要组成构件</strong> </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527225206.png" alt="" /></p>
<p>用一个个相互拼接的六角形的小区就可以组成很大的蜂窝状的无线通信系统。每个基站的发射功率既要能够覆盖本小区，也不能太大以致干扰了邻近小区的通信。</p>
<h3 id="942--移动-ip"><a class="header" href="#942--移动-ip">9.4.2  移动 IP</a></h3>
<p>移动 IP (Mobile IP)又称为移动 IP 协议，是由IETF 开发的一种技术。移动 IP 对现在流行的在移动中上网有着重要的意义。</p>
<p>这种技术允许计算机移动到外地时，仍然保留其原来的 IP 地址。</p>
<p>移动 IP 要解决的问题：使用户的移动性对上层的网络应用是透明的。</p>
<p><strong>移动 IP 使用的基本概念</strong> </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527225313.png" alt="" /></p>
<p>移动站A必须有一个原始地址，即永久地址，或归属地址 (home address)。移动站原始连接到的网络叫做归属网络 (home network)。归属网络中使用的代理叫做归属代理 (home agent) 。</p>
<p>当移动站A移动到另一个地点，接入的网络称为被访网络 (visited network)或外地网络 (foreign network)。被访网络中使用的代理叫做外地代理 (foreign agent)。为移动站A在被访网络中创建的临时地址叫做转交地址 (care-of address)。</p>
<p><strong>通信者 B 和移动站 A 的四个重要通信步骤</strong></p>
<p>1、B 发送给 A 的数据报被 A 的归属代理截获了（只有当 A 离开归属网络时，归属代理才能截获发给 A 的数据报）。</p>
<p>2、由于归属代理已经知道了 A 的转交地址（后面要讲到），因此归属代理把 B 发来的数据报进行再封装，新的数据报的目的地址是 A 现在的转交地址。新封装的数据报发送到被访网络的外地代理。这里使用的就是以前讲过的隧道技术或 IP-in-IP。</p>
<p>3、被访网络中的外地代理把收到的封装的数据报进行拆封，取出 B 发送的原始数据报，然后转发给移动站 A。这个数据报的目的地址就是 A 的永久地址。A 收到 B 发送的原始数据报后，也得到了 B 的 IP 地址。</p>
<p>4、 如果现在 A 要向 B 发送数据报，那么情况就比较简单。A 仍然使用自己的永久地址作为数据报的源地址，用 B 的 IP 地址作为数据报的目的地址。这个数据报显然没有必要在通过 A 的归属代理进行转发了。</p>
<p><strong>网络层应增加的新功能</strong></p>
<p>(1) 移动站到外地代理的协议。</p>
<p>(2) 外地代理到归属代理的登记协议。</p>
<p>(3) 归属代理数据报封装协议。</p>
<p>(4) 外地代理拆封协议。</p>
<p><strong>三角形路由选择问题</strong></p>
<p>间接路由选择：把数据报发往移动站的归属网络，由归属代理完成以后的寻址工作，进而完成数据报转发的方式。</p>
<p>间接路由选择可能会引起数据报转发的低效，文献中称之为三角形路由选择问题 (triangle routing problem)。意思是：本来在 B 和 A 之间可能有一条更有效的路由，但现在要走另外两条路：先要把数据报从 B 发送到 A 的归属代理，然后再转发给漫游到被访网络的 A。</p>
<p><strong>使用直接路由选择向移动站发送数据报</strong></p>
<p>让通信者B创建一个通信者代理 (correspondent agent)，让这个通信者代理向归属代理询问到移动站在被访网络的转交地址。然后由通信者代理把数据报用隧道技术发送到被访网络的外地代理，最后再由这个外地代理拆封，把数据报转发给移动站。但这是以增加复杂性为代价的。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527225534.png" alt="" /></p>
<p><strong>使用直接路由选择向移动站发送数据报</strong></p>
<p>1、B 的通信者代理从移动站A的归属代理得到 A 所漫游到的被访网络 N1 的外地代理。我们把移动站首次漫游到的被访网络的外地代理称为锚外地代理 (anchor foreign agent)。</p>
<p>2、 通信者代理把 B 发给 A 的数据报再封装后，发送到 A 的锚外地代理。</p>
<p>3、 锚外地代理把拆封后的数据报发送给 A。</p>
<p>4、 A 移动到另一个被访网络 N2。</p>
<p>5、 A 向被访网络 N2 的新外地代理登记。</p>
<p>6、 新外地代理把 A 的新转交地址告诉锚外地代理。</p>
<p>7、 当锚外地代理收到发给 A 的封装数据报后，就用 A 的新转交地址对数据报进行再封装，然后发送给被访网络 N2 上的新外地代理。在拆封后转发给移动站 A。</p>
<p>同理，如果移动站再漫游到另一个网络，则这个网络的外地代理将仍然要和锚外地代理联系，以便让锚外地代理以后把发给A的数据报转发过来。</p>
<h3 id="943--蜂窝移动通信网中对移动用户的路由选择"><a class="header" href="#943--蜂窝移动通信网中对移动用户的路由选择">9.4.3  蜂窝移动通信网中对移动用户的路由选择</a></h3>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527231226.png" alt="" /></p>
<p>1  找到移动用户的归属网络。</p>
<p>2 归属 MSC 向其 HLR 查询现在被叫移动用户的位置。HLR 向归属 MSC 返回被叫移动用户的移动站漫游号 MSRN。</p>
<p>3  归属 MSC 按照所得到的漫游号码 MSRN 进行呼叫的第二段，把通信者发起的呼叫从归属 MSC 传送到被访网络的 MSC，再传送到该移动用户所漫游到的小区的基站。</p>
<h3 id="944--gsm-中的切换"><a class="header" href="#944--gsm-中的切换">9.4.4  GSM 中的切换</a></h3>
<p>切换 (handover) 就是移动用户与相关联的基站发生了改变。</p>
<p>移动用户在和一个基站相关联期间，会周期性地测量来自其当前基站及其邻近基站的信标信号强度，并将测量结果以每秒 1 ~ 2 次频率报告给当前基站。根据这些测量数据以及邻近蜂窝的当前负载情况，当前基站决定是否发起切换。</p>
<p>移动站的切换可能仍处在同一个 MSC 的控制下，而只是相关联的基站发生了变化。但在许多情况下，移动站的切换是相关联的 MSC 都改变了。在这种情况下，向移动站的呼叫路由会有很大的变化。 </p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527231554.png" alt="" /></p>
<h3 id="945--无线网络对高层协议的影响"><a class="header" href="#945--无线网络对高层协议的影响">9.4.5  无线网络对高层协议的影响</a></h3>
<p>无线网络在移动站漫游时，会经常更换移动用户到无线网络的连接点（即到移动站相关联的基站）。这样，网络的连接就会发生很短时间的中断。</p>
<p>由于移动用户更新相关联的基站需要一定的时间，这就可能造成 TCP 报文段的丢失。只要出现 TCP 报文段频繁丢失，TCP 的拥塞控制就会采取措施，减小其拥塞窗口，从而使 TCP 发送方的报文段发送速率降低。</p>
<p>当无线信道出现严重的比特差错，或由于切换产生了报文段丢失，减小 TCP 发送方的拥塞窗口对改善网络性能并不会有任何好处。</p>
<p>解决方法：</p>
<p>本地恢复。这是指差错在什么地方出现，就在什么地方改正。</p>
<p>让 TCP 发送方知道什么地方使用了无线链路。只有当 TCP 能够确知，是有线网络部分发生了拥塞时，TCP 才采用拥塞控制的策略。</p>
<p>把含有移动用户的端到端 TCP 连接拆成两个互相串接的 TCP 连接。</p>
<h2 id="95--两种不同无线上网"><a class="header" href="#95--两种不同无线上网">9.5  两种不同无线上网</a></h2>
<p>前面已经介绍了两种不同的无线上网方法。</p>
<p>但应注意，它们上网所需的费用是很不一样的。</p>
<p>目前蜂窝移动网络的运营商的上网收费都是按照用户所消耗的数据流量来计算的。</p>
<p>我国的宽带入网一般都是根据用户使用的带宽多少，按使用的时间（按月或按年）付费的，因此，使用家庭的无线路由器上网，并不需要再增加任何额外上网的费用。</p>
<p><strong>几种无线网络的比较</strong></p>
<p>各种无线网络，可以看出，这些网络各有优缺点，也都有各自最适宜的使用环境。</p>
<p><img src="images/QQ%E6%88%AA%E5%9B%BE20200527233208.png" alt="" /></p>
<h2 id=""><a class="header" href="#"></a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="007-第七章、网络安全.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="009-第九章、无线网络和移动网络.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="007-第七章、网络安全.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="009-第九章、无线网络和移动网络.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
